<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="debug" strict="true" name="XMLConfigTest" package="main" monitorInterval="30">

    <!--ROLLING INTO %TOMCAT_HOME%\bin\defaultMarketLogsFolder/-->

    <Properties>
        <Property name="log-path">defaultMarketLogsFolder</Property>
        <Property name="log-project-name">market</Property>
        <Property name="log-pattern">%d{ISO8601} %-5p [Sample][%t|%c{1}] %L %M %m\n</Property>
        <Property name="rollover-strategy-max">10</Property>
        <Property name="rolling-size-based">500 kB</Property>
        <Property name="rolling-time-based">6</Property>
        <Property name="modulate-time">true</Property>
        <Property name="consoleLevel">trace</Property>
    </Properties>

    <Appenders>
        <Console name="ROOT_CONSOLE" target="SYSTEM_OUT">
            <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
        </Console>

        <RollingFile name="DEBUG-ROLLING" fileName="${log-path}/${log-project-name}---DEBUG.log"
                     filePattern="${log-path}/debug---${log-project-name}-%d-%i++++++.log.zip" append="true"
                     immediateFlush="true">
            <PatternLayout>
                <pattern>${log-pattern}</pattern>
            </PatternLayout>
            <Policies>
                <SizeBasedTriggeringPolicy size="${rolling-size-based}"/>
                <TimeBasedTriggeringPolicy interval="${rolling-time-based}" modulate="${modulate-time}"/>
            </Policies>
            <DefaultRolloverStrategy max="${rollover-strategy-max}"/>
            <DefaultRolloverStrategy max="5"/>
            <param name="Encoding" value="UTF-8"/>
        </RollingFile>

        <RollingFile name="ERROR-ROLLING" fileName="${log-path}/${log-project-name}----ERROR.log"
                     filePattern="${log-path}/error-${log-project-name}-%d-%i.log.zip" append="true"
                     immediateFlush="true">
            <PatternLayout>
                <pattern>${log-pattern}</pattern>
            </PatternLayout>
            <Policies>
                <SizeBasedTriggeringPolicy size="${rolling-size-based}"/>
                <TimeBasedTriggeringPolicy interval="${rolling-time-based}" modulate="${modulate-time}"/>
            </Policies>
            <DefaultRolloverStrategy max="${rollover-strategy-max}"/>
            <!--<Filters>-->

            <!--&lt;!&ndash; First deny error and fatal messages &ndash;&gt;-->
            <!--<ThresholdFilter level="error" onMatch="DENY"   onMismatch="NEUTRAL"/>-->
            <!--<ThresholdFilter level="fatal" onMatch="DENY"   onMismatch="NEUTRAL"/>-->

            <!--&lt;!&ndash; Then accept info, warn, error, fatal and deny debug/trace &ndash;&gt;-->
            <!--<ThresholdFilter level="warn"  onMatch="ACCEPT" onMismatch="NEUTRAL"/>-->
            <!--<ThresholdFilter level="info"  onMatch="ACCEPT" onMismatch="DENY"/>-->
            <!--</Filters>-->
            <param name="Encoding" value="UTF-8"/>

        </RollingFile>

        <RollingFile name="WARN-ROLLING" fileName="${log-path}/${log-project-name}----WARN.log"
                     filePattern="${log-path}/info-${log-project-name}-%d-%i.log.zip" append="true"
                     immediateFlush="true">
            <PatternLayout>
                <pattern>${log-pattern}</pattern>
            </PatternLayout>
            <Policies>
                <SizeBasedTriggeringPolicy size="${rolling-size-based}"/>
                <TimeBasedTriggeringPolicy interval="${rolling-time-based}" modulate="${modulate-time}"/>
            </Policies>
            <DefaultRolloverStrategy max="${rollover-strategy-max}"/>
            <!--<Filters>-->
            <!--&lt;!&ndash; Now deny warn, error and fatal messages &ndash;&gt;-->
            <!--<ThresholdFilter level="warn" onMatch="DENY" onMismatch="NEUTRAL"/>-->
            <!--<ThresholdFilter level="error" onMatch="DENY" onMismatch="NEUTRAL"/>-->
            <!--<ThresholdFilter level="fatal" onMatch="DENY" onMismatch="NEUTRAL"/>-->

            <!--&lt;!&ndash; This filter accepts info, warn, error, fatal and denies debug/trace &ndash;&gt;-->
            <!--<ThresholdFilter level="info" onMatch="ACCEPT" onMismatch="DENY"/>-->
            <!--</Filters>-->
            <param name="Encoding" value="UTF-8"/>

        </RollingFile>

    </Appenders>
    <Loggers>
        <Logger name="main.java.services" level="DEBUG" additivity="false">
            <AppenderRef ref="DEBUG-ROLLING"/>
        </Logger>
        <Logger name="main.java.servlets" level="warn" additivity="false">
            <AppenderRef ref="WARN-ROLLING"/>
        </Logger>
        <Root level="${consoleLevel}">
            <AppenderRef ref="ROOT_CONSOLE"/>
            <!--<AppenderRef ref="ERROR-ROLLING"/>-->
            <!--<AppenderRef ref="WARN-ROLLING"/>-->
            <!--<AppenderRef ref="DEBUG-ROLLING"/>-->
        </Root>
    </Loggers>
</Configuration>